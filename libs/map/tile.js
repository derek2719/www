(function(){var h=Openlayers.At;var j=Openlayers.LonLat;var m=Openlayers.Pixel;var f=h.LY;var k=h.LW;var b=h.Fn;var d=h.AK;var c=h.Fo;var g=h.EF;var i=240;var l=h.Ab;var e=h.GM;var a={ER:function(){var o=this,n=o.Fe;n.addEventListener("loadtiles",function(){o.BZ()},true);n.addEventListener("addtilelayer",function(p){o.Aw(p)},true);n.addEventListener("removetilelayer",function(p){o.BT(p)},true);n.addEventListener("setmaptype",function(p){o.LX(p)},true);n.addEventListener("zoomstartcode",function(p){o.FO(p)},true);n.addEventListener("settiletypeopts",function(p){o._cleanViewTiles_()},true);o.DN(n)},DN:function(n){var o=this;n.addEventListener("mousewheel",function(p){o.FM(p)},true);n.addEventListener("dblclick",function(p){o.LQ(p)},true);n.addEventListener("rightdblclick",function(p){o.LQ(p)},true);n.addEventListener("moving",function(p){o.CA()},true);n.addEventListener("resize",function(p){o.CA()},true)},BZ:function(){var n=this;if(!this.CN){n.FZ();this.CN=true}n.CA()},BQ:function(){var o=this,n=o.Fe;o.DN(n);o.BZ()},FM:function(p){var o=this.Fe,s=o.Bg(),n=p.level,w=p.pixel;o.Dw(new c("zoomstart"));var u=o.Ay;var r=o.EV;var q=o.getXyCenter();var t=s.Al(w,u,q,r);o.Ee=o.EV;o.EV=n;var v=s.FN(n);o.Ay=new j((t.lon+(q.x-w.x)*v),(t.lat-(q.y-w.y)*v));o.CE=s.Cq(o.Ay);this.BH(w)},BH:function(A){var u=this,n=u.Fe,x=n.FW;if(n.Dg){f.Ca(n.Dg)}u.FD();u.Ac.style.visibility="hidden";var w=n.EV-n.Ee;if(n.Kq.Bo&&n.FW.CL){var t=new m(A.x,A.y);n.Kq.Bo.BH(t,w>0?true:false)}var o=Math.pow(2,w);var s=u.CI;var y=s.style;y.visibility="";var v=s.children.length;var p=[];for(var z=v-1;z>-1;z--){var r={};var q=s.children[z].style;r.top=parseInt(q.top)||0;r.left=parseInt(q.left)||0;r.width=parseInt(q.width);r.height=parseInt(q.height);r.dw=r.width*o-r.width;r.dh=r.height*o-r.height;r.dx=(r.left-A.x)*o-(r.left-A.x);r.dy=(r.top-A.y)*o-(r.top-A.y);p[z]=r}if(u.ES){u.ES.Ej();u.ES=null}u.ES=new e({AA:20,Fb:x.CS?i:1,DH:l.AC,DM:function(B){if(B<0.1){return}n.Dw(new c("zooming"));for(var D=p.length-1;D>-1;D--){var E=p[D];if(s.children[D]){var C=s.children[D].style;C.top=Math.round(E.top+E.dy*B)+"px";C.left=Math.round(E.left+E.dx*B)+"px";C.width=Math.ceil(E.width+E.dw*B)+"px";C.height=Math.ceil(E.height+E.dh*B)+"px"}}},AD:function(){u.CA();if(n.Dg){if(g.Fs&&g.Fs<8||document.compatMode=="BackCompat"){f.FQ(n.Dg)}else{window.setTimeout(function(){f.FQ(n.Dg)},100)}}u.Ac.style.visibility="";n.Dw(new c("zoomend"));s=null;u.ES=null}})},FD:function(n){var r=this,q=r.Fe,n=n||false;if(!r.CI){if(!n){r.CI=r.Fx.cloneNode(true)}else{r.CI=r.Ac.cloneNode(true)}}else{if(r.CI.parentNode&&!r.ES){r.CI.parentNode.removeChild(r.CI);r.CI=null;if(!n){r.CI=r.Fx.cloneNode(true)}else{r.CI=r.Ac.cloneNode(true)}}}var o=r.CI,p=o.style;p.display="";p.zIndex=1000;q.Kv.insertBefore(o,q.Kv.firstChild)},LQ:function(q){var p=this.Fe;if(!p.FW.Bj){return}var t=p.Bg();var x=q.pixel;var y=1;if(q.type=="rightdblclick"){y=-1}var s=p.EV;if((y>0&&s==p.FW.HF)||(y<0&&s==p.FW.Ev)){var n=p.pixelToLonLat(x);p.panTo(n);return}p.Dw(new c("zoomstart"));var o=p.EV+y;var v=p.Ay;var s=p.EV;var r=p.getXyCenter();var u=t.Al(x,v,r,s);p.Ee=p.EV;p.EV=o;var w=t.FN(o);p.Ay=new j((u.lon+(r.x-x.x)*w),(u.lat-(r.y-x.y)*w));p.CE=t.Cq(p.Ay);this.BH(x)},LX:function(p){var r=this;var q=r.Fe;r.FD(true);for(var o in r.FS){r.Er(r.FS[o])}for(var n in r.Fa){r.Er(r.Fa[n])}delete r.Fx;r.Fa=r.FS={};r.FZ();r.CA()},Aw:function(o){var p=this;var n=o.target;n.ER(this.Fe,this.Ac);if(p.Fe.CN){p.CA()}},BT:function(t){var u=this;var s=t.target;var p=u.FS;var o=u.Fa;for(var n in p){var r=n.split("-")[1];if(r==s.FW.GG){delete p[n]}}for(var q in o){var r=q.split("-")[1];if(r==s.FW.GG){delete o[q]}}s.DA();s=null;u.CA()}};d.GZ(b,a)}());